{"version":3,"sources":["webpack://product-image/../src/single-spa-html.js"],"names":["defaultOpts","template","domElementGetter","Error","opts","bootstrap","mount","unmount","Promise","chooseDomElementGetter","domEl","props","defaultDomElementGetter","name","htmlId","domElement","document"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,WAAW,GAAG;AAClBC,YAAQ,EADU;AAElBC,oBAAgB,EAAE;AAFA,GAApB;;AAKe,+BAA6B;AAC1C,QAAI,CAAJ,MAAW;AACT,YAAMC,KAAK,CAAX,oDAAW,CAAX;AACD;;AAEDC,QAAI,sCAAJA,IAAI,CAAJA;;AAEA,QACE,CAAC,OAAOA,IAAI,CAAX,yBAAqCA,IAAI,CAAJA,2BAAtC,MACA,OAAOA,IAAI,CAAX,aAFF,YAGE;AACA,YAAMD,KAAK,CAAX,wFAAW,CAAX;AAGD;;AAED,QAAIC,IAAI,CAAJA,oBAAyB,OAAOA,IAAI,CAAX,qBAA7B,YAA0E;AACxE,YAAMD,KAAK,CAAX,4EAAW,CAAX;AAGD;;AAED,WAAO;AACLE,eAAS,EAAEA,SAAS,CAATA,WADN,IACMA,CADN;AAELC,WAAK,EAAEA,KAAK,CAALA,WAFF,IAEEA,CAFF;AAGLC,aAAO,EAAEA,OAAO,CAAPA;AAHJ,KAAP;AAKD;;AAED,kCAAgC;AAC9B,WAAOC,OAAO,CAAd,OAAOA,EAAP;AACD;;AAED,8BAA4B;AAC1B,WAAO,OAAO,CAAP,eAAuB,YAAM;AAClC,UAAMN,gBAAgB,GAAGO,sBAAsB,OAA/C,KAA+C,CAA/C;AACA,UAAMC,KAAK,GAAGR,gBAAd;;AACA,UAAI,CAAJ,OAAY;AACV,cAAMC,KAAK,CAAX,sEAAW,CAAX;AAGD;;AACDO,WAAK,CAALA,YACE,OAAON,IAAI,CAAX,0BACIA,IAAI,CAAJA,SADJ,KACIA,CADJ,GAEIA,IAAI,CAHVM;AARF,KAAO,CAAP;AAaD;;AAED,gCAA8B;AAC5B,WAAO,OAAO,CAAP,eAAuB,YAAM;AAClC,UAAMR,gBAAgB,GAAGO,sBAAsB,OAA/C,KAA+C,CAA/C;AACA,UAAMC,KAAK,GAAGR,gBAAd;;AACA,UAAI,CAAJ,OAAY;AACV,cAAMC,KAAK,CAAX,sEAAW,CAAX;AAGD;;AACDO,WAAK,CAALA;AARF,KAAO,CAAP;AAUD;;AAED,+CAA6C;AAC3C,QAAIC,KAAK,CAAT,YAAsB;AACpB,aAAO;AAAA,eAAMA,KAAK,CAAX;AAAP;AADF,WAEO,IAAIA,KAAK,CAAT,kBAA4B;AACjC,aAAOA,KAAK,CAAZ;AADK,WAEA,IAAIP,IAAI,CAAR,kBAA2B;AAChC,aAAOA,IAAI,CAAX;AADK,WAEA;AACL,aAAOQ,uBAAuB,CAA9B,KAA8B,CAA9B;AACD;AACF;;AAED,0CAAwC;AACtC,QAAMC,IAAI,GAAGF,KAAK,CAALA,WAAiBA,KAAK,CAAnC;;AAEA,QAAI,CAAJ,MAAW;AACT,YAAMR,KAAK,CAAX,uIAAW,CAAX;AAGD;;AACD,QAAMW,MAAM,oCAAZ,IAAY,CAAZ;AAEA,WAAO,wBAAwB;AAC7B,UAAIC,UAAU,GAAGC,QAAQ,CAARA,eAAjB,MAAiBA,CAAjB;;AACA,UAAI,CAAJ,YAAiB;AACfD,kBAAU,GAAGC,QAAQ,CAARA,cAAbD,KAAaC,CAAbD;AACAA,kBAAU,CAAVA;AACAC,gBAAQ,CAARA;AACD;;AAED;AARF;AAUD","file":"node_modules_single-spa-html_lib_single-spa-html_js.js","sourcesContent":["const defaultOpts = {\n  template: \"\",\n  domElementGetter: null\n};\n\nexport default function singleSpaHtml(opts) {\n  if (!opts) {\n    throw Error(`single-spa-html must be called with an opts object`);\n  }\n\n  opts = { ...defaultOpts, ...opts };\n\n  if (\n    (typeof opts.template !== \"string\" || opts.template.trim().length === 0) &&\n    typeof opts.template !== \"function\"\n  ) {\n    throw Error(\n      `single-spa-html must be passed a 'template' opt that is a non empty string or function`\n    );\n  }\n\n  if (opts.domElementGetter && typeof opts.domElementGetter !== \"function\") {\n    throw Error(\n      `single-spa-html was given 'opts.domElementGetter', but it isn't a function`\n    );\n  }\n\n  return {\n    bootstrap: bootstrap.bind(null, opts),\n    mount: mount.bind(null, opts),\n    unmount: unmount.bind(null, opts)\n  };\n}\n\nfunction bootstrap(opts, props) {\n  return Promise.resolve();\n}\n\nfunction mount(opts, props) {\n  return Promise.resolve().then(() => {\n    const domElementGetter = chooseDomElementGetter(opts, props);\n    const domEl = domElementGetter();\n    if (!domEl) {\n      throw Error(\n        `single-spa-html: domElementGetter did not return a valid dom element`\n      );\n    }\n    domEl.innerHTML =\n      typeof opts.template === \"function\"\n        ? opts.template(props)\n        : opts.template;\n  });\n}\n\nfunction unmount(opts, props) {\n  return Promise.resolve().then(() => {\n    const domElementGetter = chooseDomElementGetter(opts, props);\n    const domEl = domElementGetter();\n    if (!domEl) {\n      throw Error(\n        `single-spa-html: domElementGetter did not return a valid dom element`\n      );\n    }\n    domEl.innerHTML = \"\";\n  });\n}\n\nfunction chooseDomElementGetter(opts, props) {\n  if (props.domElement) {\n    return () => props.domElement;\n  } else if (props.domElementGetter) {\n    return props.domElementGetter;\n  } else if (opts.domElementGetter) {\n    return opts.domElementGetter;\n  } else {\n    return defaultDomElementGetter(props);\n  }\n}\n\nfunction defaultDomElementGetter(props) {\n  const name = props.appName || props.name;\n\n  if (!name) {\n    throw Error(\n      `single-spa-html was not given an application name as a prop, so it can't make a unique dom element container for the ht l application`\n    );\n  }\n  const htmlId = `single-spa-application:${name}`;\n\n  return function defaultDomEl() {\n    let domElement = document.getElementById(htmlId);\n    if (!domElement) {\n      domElement = document.createElement(\"div\");\n      domElement.id = htmlId;\n      document.body.appendChild(domElement);\n    }\n\n    return domElement;\n  };\n}\n"],"sourceRoot":""}